<div class="consent-container">
  <header class="player-info-header">
    <div class="player-details">
      <h2>{{ 'consent.playerInfoTitle' | translate }}</h2>
      <p><strong>{{ 'consent.lastNameLabel' | translate }}:</strong> {{ lastName }}</p>
      <p><strong>{{ 'consent.firstNameLabel' | translate }}:</strong> {{ firstName }}</p>
      <p><strong>{{ 'consent.birthDateLabel' | translate }}</strong> {{ birthDate }}</p>
      <p><strong>{{ 'generic.playerID' | translate }}:</strong> {{ cardIdNumber }}</p>
    </div>
    <img [src]="playerPhotoUrl" alt="Photo du Joueur" class="player-photo">
  </header>

  <section class="conditions-section">
    <div class="conditions-controls-header">
      <h2>{{ 'consent.privacyPolicyTitle' | translate }}</h2>
      <div class="text-size-slider-container">
        <span class="slider-label small-text-icon">A</span>
        <input
          type="range"
          min="12"
          max="30"
          step="1"
          [value]="currentTextSizeInPx"
          (input)="onTextSizeChange($event)"
          class="text-size-slider">
        <span class="slider-label large-text-icon">A</span>
      </div>
    </div>
    <div #rulesBody
         class="conditions-content-container"
         [style.--dynamic-font-size.px]="currentTextSizeInPx">
      <div class="conditions-content">
        <pre>{{ rulesText }}</pre>
      </div>
    </div>
  </section>

  <footer class="consent-actions-footer">
    <div class="checkbox-group">
      <label>
        <input type="checkbox" [(ngModel)]="mandatoryCheckbox">
        <span [style.font-size.px]="getScaledCheckboxLabelSize()"><strong>{{ 'consent.mandatoryConsentLabelBold' | translate }}</strong>{{ 'consent.mandatoryConsentLabelText' | translate }}</span>
      </label>
      <label>
        <input type="checkbox" [(ngModel)]="optionalCheckbox">
        <span [style.font-size.px]="getScaledCheckboxLabelSize()"><strong>{{ 'consent.optionalCommunicationsLabelBold' | translate }}</strong>{{ 'consent.optionalCommunicationsLabelText' | translate }}</span>
      </label>
    </div>

    <div class="signature-area">
      <div class="signature-header">
        <label for="signaturePadCanvas" class="signature-label">{{ 'consent.signatureLabel' | translate }}:</label>
        <div class="signature-controls">
          <button type="button" (click)="toggleSignaturePadSize()" class="signature-size-toggle-button" [title]="(isSignaturePadEnlarged ? 'RÃ©duire' : 'Agrandir') + ' la zone de signature'">
            <svg *ngIf="!isSignaturePadEnlarged" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="icon">
              <path d="M3 8.25V3h5.25L3 8.25ZM4.75 4.75H3V3h1.75v1.75ZM11.75 3H17v5.25L11.75 3ZM15.25 4.75H17V3h-1.75v1.75ZM3 11.75V17h5.25L3 11.75ZM4.75 15.25H3V17h1.75v-1.75ZM11.75 17H17v-5.25L11.75 17ZM15.25 15.25H17V17h-1.75v-1.75Z" />
            </svg>
            <svg *ngIf="isSignaturePadEnlarged" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="icon">
              <path d="M8.25 3H3v5.25L8.25 3ZM4.75 4.75V3h1.75L4.75 4.75ZM3 11.75V17h5.25L3 11.75ZM4.75 15.25V17h1.75L4.75 15.25ZM11.75 3H17v5.25L11.75 3ZM15.25 4.75V3h1.75L15.25 4.75ZM11.75 17H17v-5.25L11.75 17ZM15.25 15.25V17h1.75L15.25 15.25Z" />
            </svg>
          </button>
          <button type="button" (click)="clearSignature()" class="clear-signature-button">{{ 'consent.clearButton' | translate }}</button>
        </div>
      </div>
      <div class="signature-pad-wrapper" #signaturePadWrapper [class.enlarged]="isSignaturePadEnlarged">
        <canvas #signaturePadCanvas id="signaturePadCanvas"></canvas>
      </div>
    </div>

    <button
      type="button"
      (click)="onSubmit()"
      [disabled]="!isSubmitEnabled() || buttonState !== 'idle'"
      class="validate-button"
      [class.loading]="buttonState === 'loading'"
      [class.success]="buttonState === 'success'">
      <span *ngIf="buttonState === 'idle'">{{ 'consent.validateButton.idle' | translate }}</span>
      <div *ngIf="buttonState === 'loading'" class="spinner"></div>
      <svg *ngIf="buttonState === 'success'" class="checkmark-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path fill-rule="evenodd" d="M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.454-12.68a.75.75 0 0 1 1.04-.208Z" clip-rule="evenodd" />
      </svg>
    </button>
  </footer>
</div>
